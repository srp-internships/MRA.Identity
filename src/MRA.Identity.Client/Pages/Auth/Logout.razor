@page "/logout"
@using MRA.Identity.Client.Services.HttpClients
@inject IAltairCABlazorCookieUtil cookieUtil
@inject NavigationManager navigationManager
@inject IConfiguration configuration
@inject IHttpClientService httpClientService;


@code {
    protected override async Task OnInitializedAsync()
    {
        await cookieUtil.RemoveAsync("authToken");
        var addressesToLogout = configuration.GetSection("Platforms").Get<string[]>();

        try
        {
            await Task.WhenAll(addressesToLogout.Select(s => httpClientService.GetAsync($"{s}/logout")));
        }
        catch { }
        navigationManager.NavigateTo("/");
    }
}
